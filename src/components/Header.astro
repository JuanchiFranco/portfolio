<header class="bg-gradient-to-r from-white via-white to-[#0096c7] text-[#0096c7] text-center fixed top-0 left-0 w-full z-50 px-4 py-4 flex-none" style="height: 80px;">
  <h1 id="dynamic-heading" class="m-0 text-center block text-[1.5em] sm:text-[2em] font-bold">Juan Franco</h1>
</header>

<script is:inline>
  (function() {
    // Check if the header effect is already running
    if (window.headerEffectRunning) return;
    window.headerEffectRunning = true;

    document.addEventListener('DOMContentLoaded', () => {
      const headerTexts = ["Juan Franco", "Desarrollador Backend", "Ingeniero de Sistemas"];
      let headerIndex = 0;
      let headerCharIndex = 0;
      let headerIsDeleting = false;
      let headerTimeout;

      const typeEffect = () => {
        const currentText = headerTexts[headerIndex];
        const displayedText = currentText.slice(0, headerCharIndex);
        const heading = document.getElementById("dynamic-heading");
        
        if (heading) {
          heading.textContent = displayedText;
        }

        if (!headerIsDeleting && headerCharIndex < currentText.length) {
          headerCharIndex++;
          headerTimeout = setTimeout(typeEffect, 100); // Velocidad al escribir
        } else if (headerIsDeleting && headerCharIndex > 0) {
          headerCharIndex--;
          headerTimeout = setTimeout(typeEffect, 50); // Velocidad al borrar
        } else {
          headerIsDeleting = !headerIsDeleting;

          if (!headerIsDeleting) {
            headerIndex = (headerIndex + 1) % headerTexts.length;
          }

          // si ya termin√≥ de escribir, espera 2 segundos antes de empezar a borrar
          headerTimeout = setTimeout(typeEffect, headerIsDeleting ? 2500 : 50);
        }
      };

      // Cleanup function
      function cleanup() {
        if (headerTimeout) {
          clearTimeout(headerTimeout);
        }
        window.headerEffectRunning = false;
      }


      // Start the effect
      headerTimeout = setTimeout(typeEffect, 3);

      // Clean up on component unmount
      if (typeof window !== 'undefined') {
        window.addEventListener('beforeunload', cleanup);
      }
    });
  })();
</script>